# CustomThreadPool

## Описание проекта
Для высоконагруженного серверного приложения требуется **гибкий и эффективный пул потоков**, который позволяет управлять распределением задач, очередями и политикой отказа. В этом проекте мы **отказываемся от стандартного ThreadPoolExecutor** в пользу **собственной реализации**, чтобы получить полный контроль над поведением системы и кастомное логирование.

## Основные компоненты
- **ThreadPool** – главный класс, управляющий пулом потоков, распределяющий задачи и обрабатывающий жизненный цикл.
- **Worker** – рабочий поток, который берет задачи из своей очереди и выполняет их.
- **TaskQueue** – очередь задач, привязанная к каждому рабочему потоку (`BlockingQueue`).
- **ThreadFactory** – фабрика потоков для создания потоков с уникальными именами и логированием.
- **RejectedExecutionHandler** – обработчик отклоненных задач при переполнении очередей.

## Параметры настройки
- **corePoolSize** – минимальное количество активных потоков.
- **maxPoolSize** – максимальное количество потоков.
- **keepAliveTime** и **timeUnit** – время простоя, после которого потоки завершаются.
- **queueSize** – максимальный размер очереди задач для каждого потока.
- **minSpareThreads** – минимальное количество резервных потоков.

## Обработка отказов
**Подход**: Если все очереди переполнены и нет свободных потоков, новая задача **отклоняется** через `RejectedExecutionHandler`.

- **Почему так?** Позволяет избежать блокировки вызывающего потока и перегрузки системы. Логирование отклоненных задач помогает отслеживать проблемы.
- **Недостатки**: Возможна потеря задач при высокой нагрузке.
- **Альтернативы**: Расширение пула потоков или выполнение задачи в текущем потоке могут привести к перегрузке.

## Распределение задач
Используем **алгоритм Round Robin** для равномерного распределения задач между потоками. Это помогает:
- Балансировать нагрузку между потоками.
- Предотвращать перегрузку отдельных потоков.

## Логирование
Логируются ключевые события:
- Создание и завершение потоков.
- Постановка задач в очередь.
- Выполнение задач.
- Отклонение задач.
- Таймауты простоя.

## Структура проекта
CustomThreadPool
├── src
│   ├── main
│   │   ├── java
│   │   │   ├── CustomExecutor.java          // Интерфейс для пула потоков
│   │   │   ├── ThreadPool.java              // Реализация пула потоков
│   │   │   ├── Worker.java                  // Класс рабочего потока
│   │   │   ├── CustomThreadFactory.java     // Фабрика для создания потоков
│   │   │   ├── CustomRejectedHandler.java   // Обработчик отклоненных задач
│   │   │   └── Main.java                    // Точка входа для демонстрации
│   │   └── resources
│   │       └── (пусто или файлы ресурсов)
│   └── test
│       └── java
│           └── (будущие тесты)
├── build.gradle                             // Файл сборки Gradle
└── README.md                                // Документация проекта
